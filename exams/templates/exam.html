<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GenGoZ Exam</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://code.jquery.com/jquery-2.2.3.min.js"
            integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo="
            crossorigin="anonymous"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
          integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
          crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"
          integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r"
          crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
            integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
            crossorigin="anonymous"></script>

    <script>
        $(function () {

            $('#showButton').on('click', show);
            $('#awareButton').on('click', aware);
            $('#forgotButton').on('click', forgot);

            $(document).keyup(function (event) {
                if ($('#answer').hasClass('invisible')) {
                    if (event.which == 38 /* up arrow */) {
                        return show();
                    }
                }
                else {
                    if (event.which == 37 /* left arrow */) {
                        return aware();
                    }
                    else if (event.which == 39 /* right arrow */) {
                        return forgot();
                    }
                }
            });

            function show() {
                $('#answer').removeClass('invisible')
                $('#questionPhase').hide();
                $('#answerPhase').removeClass('hidden');
                $('#related_terms').removeClass('hidden');
                $('#status').hide();
            }

            function aware() {
                window.location.href = '{% url 'aware' study.id %}'
            }

            function forgot() {
                window.location.href = '{% url 'forgot' study.id %}'
            }
        });
    </script>

    <style>
        .vertical-center {
            min-width: 100%;
            min-height: 100%;  /* Fallback for browsers do NOT support vh unit */
            min-height: 100vh; /* These two lines are counted as one :-)       */

            display: flex;
            align-items: center;
        }

        .header-desc {
            position: absolute;
            right: 2em;
            top: 1em;
            padding-left: 2em;
            text-align: right;
        }

        .footer-desc {
            position: absolute;
            right: 2em;
            bottom: 1.5em;
            padding-left: 2em;
            text-align: right;
        }
    </style>
</head>
<body>
    <div class="vertical-center">
        <div class="container">
            <div>
                <h1 class="text-center">{{ question }}</h1>
            </div>
            <div>
                {% autoescape off %}
                <h4 class="text-center text-muted">{{ question_ex }}</h4>
                {% endautoescape %}
            </div>

            <div id="answer" class="text-center invisible" style="margin-top:3em;">
                <div>
                    <h2 class="text-primary">
                        <div>{{ answer }}</div>
                        {% if study.word.pronunciation %}
                        <div style="margin-top: 0em;"><small>[{{ study.word.pronunciation }}]</small></div>
                        {% endif %}
                    </h2>
                </div>
                <div>
                    {% autoescape off %}
                    <h4 class="text-muted">{{ answer_ex }}</h4>
                    {% endautoescape %}
                </div>
            </div>
            <div style="margin-top: 5em; margin-bottom: 3em;">
                <div id="questionPhase" class="text-center">
                    <button id="showButton" class="btn btn-lg btn-info" type="button">Show reminders [↑]</button>
                </div>
                <div id="answerPhase" class="hidden text-center">
                    <button id="awareButton" class="btn btn-lg btn-success" type="button">Remember [←]</button>
                    <button id="forgotButton" class="btn btn-lg btn-danger" type="button">&nbsp;&nbsp;&nbsp;&nbsp;Forget [→]&nbsp;&nbsp;&nbsp;</button>
                </div>
            </div>
        </div>
    </div>

    <div class="text-muted header-desc">
        <small>
            Welcome, <b>{{ user.last_name }} {{ user.first_name }}</b>.
            <a href="{% url 'password_change' %}">Change password</a>
            /
            <a href="{% url 'logout' %}">Log out</a>
        </small>
    </div>

    <div id="status" class="text-muted footer-desc">
        <small>{{ remain_count }} words / {{ study.memory.step }} step / {{ study.memory.group_level }} level</small>
    </div>

    <div id="related_terms" class="text-muted hidden footer-desc">
        <small>
            {% autoescape off %}
            {{ study.word.string_with_link }}
            {% if study.word.related.all %}
                / [관]
                {% for word in study.word.related.all %}
                    {{ word.string_with_link }}
                {% endfor %}
            {% endif %}
            {% if study.word.synonym.all %}
                / [유]
                {% for word in study.word.synonym.all %}
                    {{ word.string_with_link }}
                {% endfor %}
            {% endif %}
            {% if study.word.antonym.all %}
                / [반]
                {% for word in study.word.antonym.all %}
                    {{ word.string_with_link }}
                {% endfor %}
            {% endif %}
            {% endautoescape %}
        </small>
    </div>
</body>
</html>
